
{% extends 'base.html' %}


{% block header %}
<h1>{% block title %}{{publication['titelvermelding']}}{% endblock %}</h1>
{% endblock %}




{% block content %}

<!--
{# Display cover #}
<div style="width:15%;float:left">
    Cover-image
    {#<img src={{'/static/'+cover['location']}} alt="Front cover" style="max-width:90%;max-height:230px;width:auto;height:auto;padding: 10px;">
    todo: locate cover (publication.py, first create and fill table in db)
    todo: make into slideshow with other covers, maybe titlepage, option to enlarge image, etc.#}
</div>
-->


{# Status tabs #}
<div style="width:80%;float:left; padding: 5px;height: 450px;">
    <script type=text/javascript src="{{url_for('static', filename='js/contributor-block.js') }}"></script>

    <script type=text/javascript> 

    // initialize vars holding the role options and contributors 
    console.log('Initializing variables')
    var role_options = [];
    {% for role in role_list %}
    role_options.push({
        label: "{{role['legible']}} [{{role['ggc_code']}}]"
    });
    {%endfor%}

    var contributors = [];
    {% for contributor in contributors %}
    contributors.push({
        name: "{{contributor['title'] if contributor['title']}}{{contributor['name']}}",
        role: "{{contributor['role']  if contributor['role']}}"
    });
    {%endfor%}

    var maxIndex =0;

</script>


<!--div class="tab">
  <button class="tablinks" onclick="openTab(event, 'general')" id = "basic_tab">Titelinformatie <span class="flag" id="basic_tab_flag">&#10071;</span></button>
  <button class="tablinks" onclick="openTab(event, 'subject')" id = "subject_tab">Onderwerp<span class="flag" id="subject_tab_flag">&#10071;</span></button>
  <button class="tablinks" onclick="openTab(event, 'contributors')" id = "contributors_tab">Auteurs<span class="flag" id="contributors_tab_flag">&#10071;</span></button>
  <button class="tablinks" onclick="openTab(event, 'export'); export_info()" id = "export_tab">Exporteer</button>
</div-->

<!--div class="tab">
  <ul class="breadcrumb">
    <li><a href="javascript:openTab(event, 'general')" class="tablinks" id="basic_tab">Titelinformatie</a></li>
    <li><a href="javascript:openTab(event, 'subject')" class="tablinks" id="subject_tab">Onderwerp</a></li>
    <li><a href="javascript:openTab(event, 'contributors')" class="tablinks" id = "contributors_tab">Auteurs<span class="flag" id="contributors_tab_flag">&#10071;</span></a></li>
    <li><a href="javascript:openTab(event, 'export'); export_info()" class="tablinks" id = "export_tab">Exporteer</a></li>
  </ul>
</div-->


<div class="tab">
  <ul class="breadcrumb">
    <li><a href="#" onclick="openTab(event, 'general')" class="tablinks" id="basic_tab">Titelinformatie<span class="flag" id="basic_tab_flag">&#10071;</span></a></li>
    <li><a href="#" onclick="openTab(event, 'subject')" class="tablinks" id="subject_tab">Onderwerp<span class="flag" id="subject_tab_flag">&#10071;</span></a></li>
    <li><a href="#" onclick="openTab(event, 'contributors')" class="tablinks" id="contributors_tab">Auteurs<span class="flag" id="contributors_tab_flag">&#10071;</span></a></li>
    <li><a href="#" onclick="openTab(event, 'export'); export_info()" class="tablinks" id="export_tab">Exporteer<span class="flag" id="export_tab_flag">&#10071;</span></a></li>
  </ul>
</div>




<div id="general" class="tabcontent">
    <!--script type="text/javascript">
        console.log({{publication}})
    </script-->
    <table id="publicationinfo", class="tbinfo">
      <thead/>        
    <tbody>
      <tr>
        <td>Titel, subtitel</td>
        <td>{{ publication['titelvermelding']}}</td>
    </tr>
    <tr>
        <td>ISBN</td>
        <td>{{ publication['isbn']}}</td>
    </tr>
    <tr>
      <td>Jaar van uitgave</td>
      <td>{{ publication['jaar_van_uitgave']}}</td>
    </tr>
    <tr>
      <td>Uitgever</td>
      <td>{{ publication['uitgever'] or "-"}}</td>
    </tr>
    <tr>
      <td>Taal publicatie</td>
      <td>{{ publication['taal_publicatie']}}</td>
    </tr>
    <tr>
      <td>Taal origineel</td>
      <td>{{ publication['taal_origineel']}}</td>
    </tr>
    <tr>
      <td>Land van uitgave</td>
      <td>{{ publication['land_van_uitgave']}}</td>
    </tr>
    <tr>
        <td valign="top">Samenvatting</td>
       <!-- ('<input id="aut_name_' + maxIndex + '" type="text" placeholder="Voornaam @Achternaam" value="'+ name+'">'))-->
        <!--td><textarea id="samenvatting" rows="1" cols="80">{{publication['annotations'] or "Inhoudelijke omschrijving (bv. KMC 4207)"}}</textarea></td-->
        <td>{{publication['annotations'] or "Inhoudelijke omschrijving (bv. KMC 4207)"}}</td>
    </tr>
</tbody>
<tfoot/>  
</table>

</div>

<!-- Annif block. -->
<div id="subject" class="tabcontent">
  <div id="form">

  <div class="container">

    <div class="row pb-4">
      <div class="col-md-8 mr-auto">
        <div id="text-box" class="form-group">
          <label for="text">Input text</label>
          <div id="text-box-wrapper">
            <textarea class="form-control" rows="20" name="text" id="text"
            placeholder='Copy text here and press the button "Get suggestions"'></textarea>
            <button id="button-clear" type="button" class="btn btn-danger">&#x2715;</button>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="form-group">
          <label for="project">Project (vocabulary and language)</label>
          <div class="select-wrapper">
            <select class="form-control" id="project">
            </select>
          </div>
        </div>
        <div class="form-group">
          <fieldset id="limit-buttons" class="btn-group btn-group-toggle" data-toggle="buttons">
            <legend data-i18n="limit">Max # of suggestions</legend>
            <label class="btn btn-secondary">
              <input type="radio" name="limit" value="10" checked>
              10
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="limit" value="15">
              15
            </label>
            <label class="btn btn-secondary">
              <input type="radio" name="limit" value="20">
              20
            </label>
          </fieldset>
        </div>
        <img id="animation" src="static/img/annif-static.gif" alt="">
        <button type="button" class="btn btn-primary" id="get-suggestions">Get suggestions</button>
        
        <div id="suggestions-wrapper">
          <h2 id="suggestions" data-i18n="suggestions">Suggested subjects</h2>
          <div class="d-flex justify-content-center">
            <div id="results-spinner" class="spinner-border m-2" role="status">
              <span class="sr-only">Loading...</span>
            </div>
          </div>
          <ul class="list-group" id="results">
          </ul>
          <ul class="list-group" id="no-results">
            <li class="list-group-item p-0" data-i18n="no-results">Ei tuloksia</li>
          </ul>
        </div>

      </div>

    </div>
    
  </div>
</div>
</div>

<div id="contributors" class="tabcontent">
    <table id="contributortable" class="fixed_header" margin = 0>
      <thead>
        <tr>
          <th>&#10007;</th>
          <th>&#8679;</th>
          <th>&#8681;</th>

          <th class="name_cell"> Naam </th>
          <th class="name_cell"> Rol </th>
          <th class="name_cell"> PPN </th>
      </tr> 
  </thead>
  <tbody style="max-height: 120px">
    <!-- This is where contributors may be pre-filled and/ or manually added (client-side)-->
</tbody>
<tfoot>  
  <tr align="right">
    <td><input type="button" value="Voeg naam toe" onclick="add_contributor_row()" /></td></tr></tfoot>
</table>
</div>


<div id="export" class="tabcontent">
    Controleer KMC's hieronder, kopiÃ«er en plak naar WinIBW
    <div id="message"> Eventuele waarschuwingen </div>
</div>




<script type=text/javascript> 
  init();

</script>
</div>


{# Area for thesauring, subject indexing etc #}

<p id='thesaureervak'/>
<div style="width:100%;float:left;">
    

    <h2 id=thesaureer_title></h2>

    <div id='placeholder'></div>

    <!--<div style="height: 600px; overflow: scroll;">-->
    <table id="candidate_list" class="fixed_header">
        <thead/>
        <!--tbody class="zebra" style="height: 300px"></tbody-->
        <tbody class="zebra"/>
        <tfoot/>
    </table>

    <script type="text/javascript" src="{{url_for('static', filename='js/thesaureer-block.js') }}"></script>

</div>

<!-- thesaureerblock sub-scores tooltip table.-->
<div class="divTable" id="thesMatchHover" style="display: none;">
<div class="divTableHeading">
<div class="divTableRow">
<div class="divTableHead"></div>
<div class="divTableHead">Score</div>
<div class="divTableHead">Confidence</div>
</div>
</div>
<div class="divTableBody">
<div class="divTableRow">
<div class="divTableCell" id="tttb13"><b>Naam</b></div>
<div class="divTableCell" id="tttb14">&nbsp;</div>
<div class="divTableCell" id="tttb15">&nbsp;</div>
</div>
</div>
<div class="divTableBody">
<div class="divTableRow">
<div class="divTableCell" id="tttb1"><b>Rol</b></div>
<div class="divTableCell" id="tttb2">&nbsp;</div>
<div class="divTableCell" id="tttb3">&nbsp;</div>
</div>
<div class="divTableRow">
<div class="divTableCell" id="tttb4"><b>Genre</b></div>
<div class="divTableCell" id="tttb5">&nbsp;</div>
<div class="divTableCell" id="tttb6">&nbsp;</div>
</div>
<div class="divTableRow">
<div class="divTableCell" id="tttb7"><b>Onderwerp</b></div>
<div class="divTableCell" id="tttb8">&nbsp;</div>
<div class="divTableCell" id="tttb9">&nbsp;</div>
</div>
<div class="divTableRow">
<div class="divTableCell" id="tttb10"><b>Stijl</b></div>
<div class="divTableCell" id="tttb11">&nbsp;</div>
<div class="divTableCell" id="tttb12">&nbsp;</div>
</div>
</div>
</div>


{% endblock %}
